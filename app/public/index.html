<!DOCTYPE html>
<html>
  <head>
    <title>anonchat.pw</title>
    <link href='http://fonts.googleapis.com/css?family=Ubuntu:300&subset=latin,cyrillic-ext,latin-ext' rel='stylesheet' type='text/css'>
    <link href="/css/main.css" rel="stylesheet">
    <script src="/js/lib/prefixfree.js"></script>
    <script src="/js/lib/modernizr.js"></script>
  </head>
  <body>
    <ul id="ctrls">
      <li class="ctrl hdr"><a href="http://anonchat.pw/">anonchat.pw</a></li>
      <li class="ctrl rooms">
        <div class="top-side-shadow "><div></div></div>
        <!-- ko foreach: predefinedRooms -->
        <a data-bind="attr: { href: '#/' + $data + '/' }">
          <button class="btn" data-bind="text: $data, css: { active: $root.room() == $data }"></button></a>
        <!-- /ko -->
        <!--input id="input-room" class="black-special" title="Введите название временной комнаты" data-bind="value: customRoom, event: { keypress: inputRoomKeyPressed },
          css: { active: customRoom() == room() }" placeholder="" data-autosize-input='{ "space": 0 }' /-->
        <div class="bottom-side-shadow "><div></div></div>
      </li>
      <li class="ctrl last">
        <ul id="write-ctrl">
          <li><textarea id="msg-text" class="black-special static" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Введите Ваше сообщение'" data-bind="value: msgText, valueUpdate: 'afterkeydown', event: { keypress: msgTextKeyPressed }"></textarea></li>
          <li data-bind="if: msgImageObjectURL() !== '' ">
            <img id="msg-image-preview" src="" data-bind="visible: msgImageObjectURL(), attr: { src: msgImageObjectURL }"/>
          </li>
          <li>
            <!-- ko if: msgImageEnabled -->
              <button id="msg-image-btn" class="btn" data-bind="click: addOrRemoveMsgImage, text: addOrRemoveMsgImageText">добавить картинку</button>
              <input tabindex="-1" accept="image/*" id="msg-image-input" type="file" data-bind="file: msgImageFile, fileObjectURL: msgImageObjectURL, fileBinaryData: msgImageBinary"/>
            <!-- /ko -->
          </li>
          <li class="btns">
            <button class="btn btn-light pull-left" title="Очистить поле ввода сообщений" data-bind="click: clearMsg">очистить</button>
            <button class="btn" title="Отправить сообщение" data-bind="click: writeMsg">написать</button>
          </li>
        </ul>
      </li>
  
      <li class="other-form settings" style="display: none" data-bind="visible: showSettings">
        <span class="close" data-bind="click: toggleSettings">×</span>
        <ul> 
          <li class="hdr">Настройки</li>
          <li>
            <label for="rooms-list">Список комнат ( через запятую )</label>
            <input id="rooms-list" class="black-special static" type="text" data-bind="arrayValue: predefinedRooms, arrayValueRegexp: '^\\w*[A-Za-z_]\\w*$'"/>
          </li>
          <li>
            <label for="ext-code">Код расширения</label>
            <input id="ext-code" class="black-special static" type="text" data-bind="value: extCode"/>
          </li>
        </ul>
      </li>

      <li class="other-form" style="display: none" data-bind="visible: showHelp">
        <span class="close" data-bind="click: toggleHelp">×</span>
        <ul>
          <li class="hdr">Справка</li>
          <li>
            Быстрые клавиши:
            <ul>
              <li>Ctrl+Enter(Cmd+Enter) - написать</li>
            </ul>
          </li>

          <li>
            Разметка в пределах строки:
            <ul>
              <li>*{<strong>жирный</strong>}*</li>
              <li>%{<em>наклонный</em>}%</li>
              <li><q>&gt;цитата</q></li>
            </ul>
          </li>
          <li>
            Ссылки:
            <ul>
              <li>#/&lt;<em>room</em>&gt;/</li>
              <li>/&lt;<em>post</em>&gt;/</li>
              <li>#/&lt;<em>room</em>&gt;/&lt;<em>post</em>&gt;/</li>
            </ul>
          </li>
          <li>
            Ограничения:
            <ul>
              <li><em>&lt;room&gt;</em> - имя комнаты может состоять только из символов [A-Za-z0-9_] и должен содержать хотябы один символ [A-Za-z_]</li>
              <li><em>&lt;post&gt;</em> - номер поста может состоять только из цифр [0-9]</li>
            </ul>
          </li>
          <li>
            Комнаты:
            <ul>
              <!--li>Список комнат</li-->
              <!--li>Поля ввода для ручного выбора комнаты</li-->
              <li>В настройках можно определить список комнат</li>
            </ul>
          </li>
          <li>
            Лог сообщений:
            <ul>
              <li>Cохраняется только для комнаты <em>b</em></li>
              <li>Для остальных комнат стирается после ухода последнего участника</li>
            </ul>
          </li>

        </ul>
      </li>

      <li class="other-btns ctrl">
        <div class="top-side-shadow "><div></div></div>
        <span class="btn btn-icon btn-tgl icon-sound" title="Вкл/выкл. звук" data-bind="css: { 'icon-sound': soundEnabled(), 'icon-no-sound': !soundEnabled() }, click: toggleSound"></span>
        <span class="btn btn-icon btn-tgl icon-settings" title="Настройки" data-bind="css: { active: showSettings() }, click: toggleSettings"></span>
        <span class="btn btn-icon btn-tgl icon-help" title="Справка" data-bind="css: { active: showHelp() }, click: toggleHelp"></span>
        <div class="bottom-side-shadow "><div></div></div>
      </li>

      <li class="stats">
        <ul class="rows">
          <li class="row">
            <span class="key">кол-во клиентов в комнате:</span>
            <span class="val" data-bind="text: clientsCount">&nbsp;</span>
          </li>
          <li class="row">
            <span class="key">кол-во клиентов на сайте:</span>
            <span class="val" data-bind="text: totalClientsCount">&nbsp;</span>
          </li>
          <li class="row">
            <span class="key">версия движка:</span>
            <span class="val">1.0.8</span>
          </li>
        </ul>
      </li>
    </ul>


    <ul id="msgs" data-bind="foreach: msgs">
      <li class="msg-outer">
        <div class="msg" data-bind="attr: { id: 'msg-' + id() }, css: { active: active() }">
          <div class="hdr">
            <strong><a class="post-id" data-bind="attr: { href: linkLong }">/<span data-bind="text: id"></span>/</a></strong>&nbsp;|&nbsp;<span data-bind="text: dt"></span>&nbsp;|&nbsp;<button class='btn btn-small btn-light' data-bind="click: function(data) { $root.answerMsg(data); }">отв</button>&nbsp;<button class='btn btn-small btn-light' data-bind="click: function(data) { $root.answerMsgQuoted(data); }">отв цит</button>&nbsp;<button class='btn btn-small btn-light' data-bind="click: function(data) { $root.quoteMsg(data); }">цит</button>
            <!-- ko if: active() -->
              <button class='btn btn-small btn-light' data-bind="click: $root.clearPost">снять выдел</button>
              <button class='btn btn-small btn-light' data-bind="click: function() { history.go(-1); }">назад</button>
            <!-- /ko -->
          </div>
          <div class="txt">
            <!-- ko if: image -->
              <a class="img" target="_blank" data-bind="attr: { href: imageSrc }"><img data-bind="attr: { src: imageThumbSrc }"></a>
            <!-- /ko -->
            <!-- ko html: text -->
            <!-- /ko -->
          </div>
        </div>
      </li>
    </ul>

    <script src="/js/lib/jquery.js"></script>
    <script src="/js/lib/jquery-throttle-debounce.js"></script>
    <script src="/js/lib/jquery-title-alert.js"></script>
    <script src="/js/lib/jquery-scroll-to.js"></script>
    <script src="/js/lib/jquery-autosize-input.js"></script>
    <script src="/js/lib/jquery-autosize.js"></script>
    <script src="/js/lib/jquery-cookie.js"></script>
    <script src="/js/lib/jquery-caret.js"></script>
    <script src="/js/lib/base32k.js"></script>
    <script src="/js/lib/soundmanager.js"></script>
    <script src="/js/lib/sammy.js"></script>
  	<script src="/js/lib/knockout.js"></script>
  	<script src="/js/lib/knockout-mapping.js"></script>
    <script src="/socket.io/socket.io.js"></script>
  	<script src="/js/app.js?v=1"></script>
    <!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter21782987 = new Ya.Metrika({id:21782987, clickmap:true, trackLinks:true, accurateTrackBounce:true, trackHash:true, ut:"noindex"}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/21782987?ut=noindex" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->
  </body>
</html>
